async function getPatchID(){let patchApiData="https://api.brawlhalla.fr/angularwebapp2/getPatch",response=await fetch(patchApiData),data,patch;return(await response.json()).find(patch=>!0===patch.current).id}function clearAndLoadData(){document.getElementById("progress").innerHTML='\n        <div class="top-data-progress__bar" id="progress-bar">\n        <div class="top-data-progress__bar__silver" id="silver">\n            <i class="fas fa-circle-dot" style="color: #424242"></i>\n        </div>\n        <div class="top-data-progress__bar__between" style="background-color: #424242;"></div>\n        <div class="top-data-progress__bar__gold" id="gold">\n            <i class="fas fa-circle-dot" style="color: #424242"></i>\n        </div>\n        <div class="top-data-progress__bar__between" style="background-color: #424242;"></div>\n        <div class="top-data-progress__bar__platinum" id="platinum">\n            <i class="fas fa-circle-dot" style="color: #424242"></i>\n        </div>\n        <div class="top-data-progress__bar__between" style="background-color: #424242;"></div>\n        <div class="top-data-progress__bar__diamond" id="diamond">\n            <i class="fas fa-circle-dot" style="color: #424242"></i>\n        </div>\n    </div>\n    <div class="top-data-progress-rank">\n        <h2 class="top-data-progress-rank__title" style="color: #424242">UnRanked</h2>\n    </div>\n    ',document.getElementById("top-characters").innerHTML='\n        <div class="top-character" id="top-2">\n            <img class="top-character__icon" src="./public/img/legends/Portrait_default.webp" alt="default frame">\n            <div class="top-character__level">\n                <h2 style="color: #A8A9AD">??</h2>\n            </div>\n        </div>\n        <div class="top-character" id="top-1">\n            <i class="fa-solid fa-crown top-character_1"></i>\n            <img class="top-character__icon" src="./public/img/legends/Portrait_default.webp" alt="default frame">\n            <div class="top-character__level">\n                <h2 style="color: #FFD700">??</h2>\n            </div>\n        </div>\n        <div class="top-character" id="top-3">\n            <img class="top-character__icon" src="./public/img/legends/Portrait_default.webp" alt="default frame">\n            <div class="top-character__level">\n                <h2 style="color: #CD7F32">??</h2>\n            </div>\n        </div>\n            ',fetch("./public/js/legends.json").then(response=>response.json()).then(data=>{let legendData=data;for(let i=0;i<legendData.length;i++){let legends,legendName=legendData[i];document.getElementById(`${legendName}`).innerHTML='\n            <img class="container-character__icon" src="./public/img/legends/Portrait_default.webp" alt="default frame">\n            <div class="container-character__checkmark-none">\n            <i class="fa-sharp fa-solid fa-circle-xmark"></i>\n            </div>\n            <div class="container-character__level">\n                <h2 style="color: crimson">??</h2>\n            </div>\n            '}}),getBrawlhallaID()}async function getBrawlhallaID(){let patchID=await getPatchID();playerID=document.getElementById("brawlhallaID").value,legendApiData=`https://api.brawlhalla.fr/angularwebapp2/playerLegends?name=${playerID}&patch=${patchID}`,rankedApiData=`https://api.brawlhalla.fr/angularwebapp2/playerMain?name=${playerID}&patch=${patchID}`,updateDataUrl=`https://api.brawlhalla.fr/angularwebapp2/updatep?name=${playerID}`,fetch(updateDataUrl),getPlayerName(patchID),getPlayerData(legendApiData),getHighestLevel(legendApiData),getWinsLossesRatio(rankedApiData),getRank(rankedApiData),getPlayerElo(rankedApiData)}function getRank(rankedApiData){fetch(rankedApiData).then(response=>response.json()).then(data=>{let rank=data.tier;if(rank=rank.replace(/\s+/g,""),rank=rank.replace(/[0-9]/g,""),"Diamond"==rank){let rankLocation;rank="diamond",document.getElementById("progress").innerHTML='\n            <div class="top-data-progress__bar" id="progress-bar">\n                <div class="top-data-progress__bar__silver" id="silver">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill: #d9d9da; width: 25px;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>\n                </div>\n                <div class="top-data-progress__bar__between" style="background-color: #d9d9da;"></div>\n                <div class="top-data-progress__bar__gold" id="gold">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill: #fbd05d; width: 25px;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>\n                </div>\n                <div class="top-data-progress__bar__between" style="background-color: #fbd05d;"></div>\n                <div class="top-data-progress__bar__platinum" id="platinum">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill: #005dd1; width: 25px;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>\n                </div>\n                <div class="top-data-progress__bar__between" style="background-color: #005dd1;"></div>\n                <div class="top-data-progress__bar__diamond" id="diamond">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill: #382195; width: 25px;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>\n                </div>\n            </div>\n            <div class="top-data-progress-rank">\n                <h2 class="top-data-progress-rank__title" style="color: #382195">Diamant</h2>\n                <h3 id="elo" class="top-data-progress-rank__elo" style="color: #382195"></h3>\n            </div>\n            '}else if("Platinum"==rank){let rankLocation;rank="platinum",document.getElementById("progress").innerHTML='\n            <div class="top-data-progress" id="progress">\n            <div class="top-data-progress__bar" id="progress-bar">\n                <div class="top-data-progress__bar__silver" id="silver">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill: #d9d9da; width: 25px;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>\n                </div>\n                <div class="top-data-progress__bar__between" style="background-color: #d9d9da;"></div>\n                <div class="top-data-progress__bar__gold" id="gold">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill: #fbd05d; width: 25px;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>\n                </div>\n                <div class="top-data-progress__bar__between" style="background-color: #fbd05d;"></div>\n                <div class="top-data-progress__bar__platinum" id="platinum">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill: #005dd1; width: 25px;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>\n                </div>\n                <div class="top-data-progress__bar__between" style="background-color: #424242;"></div>\n                <div class="top-data-progress__bar__diamond" id="diamond">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill: #424242; width: 25px;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>\n                </div>\n            </div>\n            <div class="top-data-progress-rank">\n                <h2 class="top-data-progress-rank__title" style="color: #005dd1">Platine</h2>\n                <h3 id="elo" class="top-data-progress-rank__title" style="color: #005dd1"></h3>\n            </div>\n            '}else if("Gold"==rank){let rankLocation;rank="gold",document.getElementById("progress").innerHTML='\n            <div class="top-data-progress" id="progress">\n            <div class="top-data-progress__bar" id="progress-bar">\n                <div class="top-data-progress__bar__silver" id="silver">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill: #d9d9da; width: 25px;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>\n                </div>\n                <div class="top-data-progress__bar__between" style="background-color: #d9d9da;"></div>\n                <div class="top-data-progress__bar__gold" id="gold">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill: #fbd05d; width: 25px;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>\n                </div>\n                <div class="top-data-progress__bar__between" style="background-color: #424242;"></div>\n                <div class="top-data-progress__bar__platinum" id="platinum">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill: #424242; width: 25px;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>\n                </div>\n                <div class="top-data-progress__bar__between" style="background-color: #424242;"></div>\n                <div class="top-data-progress__bar__diamond" id="diamond">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill: #424242; width: 25px;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>\n                </div>\n            </div>\n            <div class="top-data-progress-rank">\n                <h2 class="top-data-progress-rank__title" style="color: #fbd05d;">Or</h2>\n                <h3 id="elo" class="top-data-progress-rank__title" style="color: #fbd05d;"></h3>\n            </div>\n            '}else if("Silver"==rank){let rankLocation;rank="silver",document.getElementById("progress").innerHTML='\n            <div class="top-data-progress" id="progress">\n            <div class="top-data-progress__bar" id="progress-bar">\n                <div class="top-data-progress__bar__silver" id="silver">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill: #d9d9da; width: 25px;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>\n                </div>\n                <div class="top-data-progress__bar__between" style="background-color: #424242;"></div>\n                <div class="top-data-progress__bar__gold" id="gold">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill: #424242; width: 25px;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>\n                </div>\n                <div class="top-data-progress__bar__between" style="background-color: #424242;"></div>\n                <div class="top-data-progress__bar__platinum" id="platinum">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill: #424242; width: 25px;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>\n                </div>\n                <div class="top-data-progress__bar__between" style="background-color: #424242;"></div>\n                <div class="top-data-progress__bar__diamond" id="diamond">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="fill: #424242; width: 25px;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-352a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>\n                </div>\n            </div>\n            <div class="top-data-progress-rank">\n                <h2 class="top-data-progress-rank__title" style="color: #d9d9da">Argent</h2>\n                <h3 id="elo" class="top-data-progress-rank__title" style="color: #d9d9da"></h3>\n            </div>\n            '}})}function getHighestLevel(legendApiData){fetch(legendApiData).then(response=>response.json()).then(data=>{let legends=data;legends.sort((a,b)=>a.level<b.level?1:-1);let top3=legends.slice(0,3),legendNamesData,legendNames=top3.map(legend=>legend.legend_name_key).map(legend=>legend.replace(/\s+/g,"")),legendLevels=top3.map(legend=>legend.level);displayHighestLocation=document.getElementById("top-characters"),displayHighestLocation.innerHTML=`\n            <div class="top-character" id="top-2">\n                <img class="top-character__icon" src="./public/img/legends/Portrait_${legendNames[1]}.png" alt="${legendNames[1]} frame">\n                <div class="top-character__level">\n                    <h2 style="color: #A8A9AD">${legendLevels[1]}</h2>\n                </div>\n            </div>\n            <div class="top-character" id="top-1">\n                <i class="fa-solid fa-crown top-character_1"></i>\n                <img class="top-character__icon" src="./public/img/legends/Portrait_${legendNames[0]}.png" alt="${legendNames[0]} frame">\n                <div class="top-character__level">\n                    <h2 style="color: #FFD700">${legendLevels[0]}</h2>\n                </div>\n            </div>\n            <div class="top-character" id="top-3">\n                <img class="top-character__icon" src="./public/img/legends/Portrait_${legendNames[2]}.png" alt="${legendNames[2]} frame">\n                <div class="top-character__level">\n                    <h2 style="color: #CD7F32">${legendLevels[2]}</h2>\n                </div>\n            </div>\n            `})}function getPlayerData(legendApiData){fetch(legendApiData).then(response=>response.json()).then(data=>{let legendsData=data;for(let i=0;i<legendsData.length;i++){let legends=legendsData[i],legendNameData,legendName=legends.legend_name_key.replace(/\s+/g,""),legendLevel=legends.level,legendLocation=document.getElementById(`${legendName}`);legendLevel>=25?legendLocation.innerHTML=`\n                    <img class="container-character__icon" src="./public/img/legends/Portrait_${legendName}.png" alt="${legendName} frame">\n                    <div class="container-character__checkmark">\n                    <i class="fa-sharp fa-solid fa-circle-check"></i>\n                    </div>\n                    <div class="container-character__level">\n                        <h2 style="color: rgb(125, 255, 125)">${legendLevel}</h2>\n                    </div>\n                    `:legendLevel<25&&(legendLocation.innerHTML=`\n                        <img class="container-character__icon-none" src="./public/img/legends/Portrait_${legendName}.png" alt="${legendName} frame">\n                        <div class="container-character__checkmark-none">\n                        <i class="fa-sharp fa-solid fa-circle-xmark"></i>\n                        </div>\n                        <div class="container-character__level">\n                            <h2 style="color: crimson">${legendLevel}</h2>\n                        </div>\n                        `)}}).catch(error=>{console.log(error)})}function getPlayerName(patchID){getPatchID();let playerName=document.getElementById("brawlhallaID").value,playerNameLocation=document.getElementById("playerName");fetch(`https://api.brawlhalla.fr/angularwebapp2/playerMain?name=${playerName}&patch=${patchID}`).then(response=>response.json()).then(data=>{let playerName=data.name;playerNameLocation.innerHTML=`\n        <h1 class="top-data__name">${playerName}</h1>\n        `})}function getPlayerElo(rankedApiData){fetch(rankedApiData).then(response=>response.json()).then(data=>{let elo=data.rating,eloLocation;document.getElementById("elo").innerHTML=`\n        Elo: ${elo}\n        `})}function checkAlias(){let brawlhallaID=document.getElementById("brawlhallaID").value;fetch("./public/js/players.json").then(response=>response.json()).then(data=>{let players,player=data.find(player=>player.alias===brawlhallaID);player?(document.getElementById("brawlhallaID").value=player.id,clearAndLoadData()):clearAndLoadData()})}function getWinsLossesRatio(rankedApiData){fetch(rankedApiData).then(response=>response.json()).then(data=>{let wins=data.wins,losses=data.games-data.wins,ratioLocation;document.getElementById("ratio").innerHTML=`\n        <h2 style="color: green;">${wins} W</h2>\n        <h2 style="color: black;">/</h2>\n        <h2 style="color: crimson;">${losses} L</h2>\n        `})}document.getElementById("brawlhallaID").addEventListener("keyup",(function(event){13===event.keyCode&&(event.preventDefault(),checkAlias())})),clearAndLoadData();