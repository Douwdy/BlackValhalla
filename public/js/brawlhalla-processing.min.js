async function getPatchID(){let patchApiData="https://api.brawlhalla.fr/angularwebapp2/getPatch",response=await fetch(patchApiData),data,patch;return(await response.json()).find(patch=>!0===patch.current).id}async function getBrawlhallaID(){let patchID=await getPatchID();playerID=document.getElementById("brawlhallaID").value,legendApiData=`https://api.brawlhalla.fr/angularwebapp2/playerLegends?name=${playerID}&patch=${patchID}`,rankedApiData=`https://api.brawlhalla.fr/angularwebapp2/playerMain?name=${playerID}&patch=${patchID}`,null!==localStorage.getItem("legendApiData")?(legendApiData=localStorage.getItem("legendApiData"),rankedApiData=localStorage.getItem("rankedApiData")):(getPlayerData(legendApiData),getHighestLevel(legendApiData),getWinsLossesRatio(rankedApiData),getRank(rankedApiData))}function updateBrawlhallaData(){patchID=document.getElementById("patch").value,playerID=document.getElementById("brawlhallaID").value,updateDataUrl=`https://api.brawlhalla.fr/angularwebapp2/updatep?name=${playerID}`,legendApiData=`https://api.brawlhalla.fr/angularwebapp2/playerLegends?name=${playerID}&patch=${patchID}`,rankedApiData=`https://api.brawlhalla.fr/angularwebapp2/playerMain?name=${playerID}&patch=${patchID}`,fetch(updateDataUrl),getPlayerData(legendApiData),getHighestLevel(legendApiData),getWinsLossesRatio(rankedApiData),getRank(rankedApiData)}function getRank(rankedApiData){fetch(rankedApiData).then(response=>response.json()).then(data=>{let rank=data.tier;if(rank=rank.replace(/\s+/g,""),rank=rank.replace(/[0-9]/g,""),"Diamond"==rank){let rankLocation;rank="diamond",document.getElementById("rank").innerHTML='\n            <div class="top-data-rank__icon">\n            <i class="fas fa-circle-dot" style="color: #382195"></i>\n            </div>\n            <h2 class="top-data-rank__title" style="color: #382195">Diamant</h2>\n            '}else if("Platinum"==rank){let rankLocation;rank="platinum",document.getElementById("rank").innerHTML='\n            <div class="top-data-rank__icon">\n            <i class="fas fa-circle-dot" style="color: #005dd1"></i>\n            </div>\n            <h2 class="top-data-rank__title" style="color: #005dd1">Platine</h2>\n            '}else if("Gold"==rank){let rankLocation;rank="gold",document.getElementById("rank").innerHTML='\n            <div class="top-data-rank__icon">\n            <i class="fas fa-circle-dot" style="color: #fbd05d"></i>\n            </div>\n            <h2 class="top-data-rank__title" style="color: #fbd05d;">Or</h2>\n            '}else if("Silver"==rank){let rankLocation;rank="silver",document.getElementById("rank").innerHTML='\n            <div class="top-data-rank__icon">\n            <i class="fas fa-circle-dot" style="color: #d9d9da"></i>\n            </div>\n            <h2 class="top-data-rank__title" style="color: #d9d9da">Argent</h2>\n            '}else{let rankLocation;rank="unranked",document.getElementById("rank").innerHTML='\n            <div class="top-data-rank__icon">\n            <i class="fas fa-circle-dot" style="color: black"></i>\n            </div>\n            <h2 class="top-data-rank__title" style="color: black">UnRanked</h2>\n            '}})}function getHighestLevel(legendApiData){fetch(legendApiData).then(response=>response.json()).then(data=>{let legends=data;legends.sort((a,b)=>a.level<b.level?1:-1);let top3=legends.slice(0,3),legendNamesData,legendNames=top3.map(legend=>legend.legend_name_key).map(legend=>legend.replace(/\s+/g,"")),legendLevels=top3.map(legend=>legend.level);displayHighestLocation=document.getElementById("top-characters"),displayHighestLocation.innerHTML=`\n            <div class="top-character" id="top-2">\n                <img class="top-character__icon" src="./public/img/legends/Portrait_${legendNames[1]}.webp" alt="${legendNames[1]} frame">\n                <div class="top-character__level">\n                    <h2 style="color: #A8A9AD">${legendLevels[1]}</h2>\n                </div>\n            </div>\n            <div class="top-character" id="top-1">\n                <i class="fa-solid fa-crown top-character_1"></i>\n                <img class="top-character__icon" src="./public/img/legends/Portrait_${legendNames[0]}.webp" alt="${legendNames[0]} frame">\n                <div class="top-character__level">\n                    <h2 style="color: #FFD700">${legendLevels[0]}</h2>\n                </div>\n            </div>\n            <div class="top-character" id="top-3">\n                <img class="top-character__icon" src="./public/img/legends/Portrait_${legendNames[2]}.webp" alt="${legendNames[2]} frame">\n                <div class="top-character__level">\n                    <h2 style="color: #CD7F32">${legendLevels[2]}</h2>\n                </div>\n            </div>\n            `})}function getPlayerData(legendApiData){fetch(legendApiData).then(response=>response.json()).then(data=>{let legendsData=data;for(let i=0;i<legendsData.length;i++){let legends=legendsData[i],legendNameData,legendName=legends.legend_name_key.replace(/\s+/g,""),legendLevel=legends.level,legendLocation=document.getElementById(`${legendName}`);legendLevel>=25?legendLocation.innerHTML=`\n                    <img class="container-character__icon" src="./public/img/legends/Portrait_${legendName}.webp" alt="${legendName} frame">\n                    <div class="container-character__checkmark">\n                    <i class="fa-sharp fa-solid fa-hexagon-check"></i>\n                    </div>\n                    <div class="container-character__level">\n                        <h2 style="color: rgb(125, 255, 125)">${legendLevel}</h2>\n                    </div>\n                    `:legendLevel<25&&(legendLocation.innerHTML=`\n                        <img class="container-character__icon-none" src="./public/img/legends/Portrait_${legendName}.webp" alt="${legendName} frame">\n                        <div class="container-character__checkmark-none">\n                        <i class="fa-sharp fa-solid fa-hexagon-xmark"></i>\n                        </div>\n                        <div class="container-character__level">\n                            <h2 style="color: crimson">${legendLevel}</h2>\n                        </div>\n                        `)}}).catch(error=>{console.log(error)})}function getWinsLossesRatio(rankedApiData){fetch(rankedApiData).then(response=>response.json()).then(data=>{let wins=data.wins,losses=data.games-data.wins,ratioLocation;document.getElementById("ratio").innerHTML=`\n        <h2 style="color: green;">${wins} W</h2>\n        <h2 style="color: black;">/</h2>\n        <h2 style="color: crimson;">${losses} L</h2>\n        `})}getBrawlhallaID();